#N canvas 729 94 602 589 10;
#X obj 11 339 list;
#X obj 77 249 t l l, f 6;
#X obj 32 315 spigot, f 8;
#X obj 50 108 t f f;
#X obj 96 318 spigot;
#X obj 75 339 f, f 4;
#N canvas 116 466 372 306 mat.vec.mul 0;
#X obj 116 12 inlet;
#X obj 20 12 inlet;
#X obj 20 98 *;
#X obj 47 98 *;
#X obj 20 120 +, f 5;
#X obj 20 194 outlet;
#X obj 163 12 inlet;
#X obj 220 12 inlet;
#X obj 20 172 pack f f f, f 19;
#X obj 20 34 unpack f f f f f f f f f;
#X obj 20 142 +, f 10;
#X obj 77 98 *;
#X obj 110 98 *;
#X obj 137 98 *;
#X obj 110 120 +, f 5;
#X obj 110 142 +, f 10;
#X obj 167 98 *;
#X obj 200 98 *;
#X obj 227 98 *;
#X obj 200 120 +, f 5;
#X obj 200 142 +, f 10;
#X obj 257 98 *;
#X connect 0 0 2 1;
#X connect 0 0 12 1;
#X connect 0 0 17 1;
#X connect 1 0 9 0;
#X connect 2 0 4 0;
#X connect 3 0 4 1;
#X connect 4 0 10 0;
#X connect 6 0 3 1;
#X connect 6 0 13 1;
#X connect 6 0 18 1;
#X connect 7 0 11 1;
#X connect 7 0 16 1;
#X connect 7 0 21 1;
#X connect 8 0 5 0;
#X connect 9 0 2 0;
#X connect 9 1 3 0;
#X connect 9 2 11 0;
#X connect 9 3 12 0;
#X connect 9 4 13 0;
#X connect 9 5 16 0;
#X connect 9 6 17 0;
#X connect 9 7 18 0;
#X connect 9 8 21 0;
#X connect 10 0 8 0;
#X connect 11 0 10 1;
#X connect 12 0 14 0;
#X connect 13 0 14 1;
#X connect 14 0 15 0;
#X connect 15 0 8 1;
#X connect 16 0 15 1;
#X connect 17 0 19 0;
#X connect 18 0 19 1;
#X connect 19 0 20 0;
#X connect 20 0 8 2;
#X connect 21 0 20 1;
#X restore 77 227 pd mat.vec.mul;
#X obj 132 116 loadbang;
#N canvas 0 22 193 267 loop 0;
#X obj 8 60 until;
#X obj 8 82 f, f 7;
#X obj 47 60 f 0;
#X obj 59 82 + 1;
#X obj 8 32 t b b, f 7;
#X obj 8 8 inlet;
#X obj 47 158 outlet;
#X obj 8 181 outlet;
#X obj 47 111 r \$0-nmatrices;
#X obj 8 134 sel 256;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 0 9 0;
#X connect 2 0 1 1;
#X connect 3 0 1 1;
#X connect 4 0 0 0;
#X connect 4 1 2 0;
#X connect 5 0 4 0;
#X connect 8 0 9 1;
#X connect 9 0 7 0;
#X connect 9 0 0 1;
#X connect 9 1 6 0;
#X restore 11 84 pd loop;
#N canvas 0 22 508 262 to.p 0;
#X obj 21 228 outlet;
#X obj 21 46 inlet;
#X obj 66 228 outlet;
#X obj 21 98 / 180;
#X obj 21 120 * 3.14159;
#X obj 21 142 t f f, f 8;
#X obj 96 98 / 180, f 6;
#X obj 96 120 * 3.14159;
#X obj 96 142 t f f, f 8;
#X obj 21 206 *;
#X obj 66 206 *;
#X obj 21 74 unpack f f, f 13;
#X obj 96 164 cos;
#X obj 141 164 sin;
#X obj 21 186 * -1;
#X obj 21 164 sin;
#X obj 66 164 cos;
#X obj 141 228 outlet;
#X obj 147 28 loadbang;
#X obj 147 70 atan 1;
#X msg 147 50 1;
#X obj 147 92 * 4;
#X connect 1 0 11 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 5 0 15 0;
#X connect 5 1 16 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 12 0;
#X connect 8 1 13 0;
#X connect 9 0 0 0;
#X connect 10 0 2 0;
#X connect 11 0 3 0;
#X connect 11 1 6 0;
#X connect 12 0 9 1;
#X connect 12 0 10 1;
#X connect 13 0 17 0;
#X connect 14 0 9 0;
#X connect 15 0 14 0;
#X connect 16 0 10 0;
#X connect 18 0 20 0;
#X connect 19 0 21 0;
#X connect 20 0 19 0;
#X connect 21 0 7 1;
#X connect 21 0 4 1;
#X restore 117 204 pd to.p;
#X obj 11 530 outlet;
#N canvas 0 23 452 431 pass 0;
#X obj 52 357 >;
#X obj 19 380 spigot;
#X obj 19 335 t f f, f 6;
#X obj 19 14 inlet;
#X obj 52 412 outlet;
#X obj 19 263 spigot;
#N canvas 0 22 450 300 g.factor 0;
#X obj 9 7 inlet;
#X obj 9 169 outlet;
#X obj 67 79 *, f 5;
#X obj 9 79 *, f 5;
#X obj 9 101 +, f 10;
#X obj 9 143 sqrt;
#X obj 9 34 unpack f f f, f 20;
#X obj 126 79 *, f 5;
#X obj 9 123 +, f 20;
#X obj 67 57 t f f;
#X obj 126 57 t f f;
#X obj 9 57 t f f;
#X connect 0 0 6 0;
#X connect 2 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 8 0;
#X connect 5 0 1 0;
#X connect 6 0 11 0;
#X connect 6 1 9 0;
#X connect 6 2 10 0;
#X connect 7 0 8 1;
#X connect 8 0 5 0;
#X connect 9 0 2 0;
#X connect 9 1 2 1;
#X connect 10 0 7 0;
#X connect 10 1 7 1;
#X connect 11 0 3 0;
#X connect 11 1 3 1;
#X restore 19 284 pd g.factor;
#X obj 142 274 sel 0;
#X obj 142 296 f 0;
#X obj 52 172 *, f 6;
#X obj 67 333 f 0;
#X obj 67 308 r \$0-clear;
#X obj 52 150 >= 0;
#X obj 86 150 >= 0;
#X obj 52 58 unpack f f f;
#X obj 121 150 >= 0;
#X obj 52 194 *, f 12;
#X obj 212 172 *, f 6;
#X obj 212 58 unpack f f f;
#X obj 212 194 *, f 12;
#X obj 52 216 *;
#X obj 19 36 t l l l;
#X obj 212 150 < 3;
#X obj 246 150 < 3;
#X obj 281 150 < 3;
#X obj 52 80 + 1e-06;
#X obj 86 100 + 1e-06;
#X obj 121 128 + 1e-06;
#X obj 212 80 + 1e-06;
#X obj 246 100 + 1e-06;
#X obj 281 128 + 1e-06;
#X connect 0 0 1 1;
#X connect 0 0 4 0;
#X connect 1 0 0 1;
#X connect 2 0 1 0;
#X connect 2 1 0 0;
#X connect 3 0 21 0;
#X connect 5 0 6 0;
#X connect 6 0 2 0;
#X connect 7 0 8 0;
#X connect 8 0 4 0;
#X connect 9 0 16 0;
#X connect 10 0 0 1;
#X connect 11 0 10 0;
#X connect 12 0 9 0;
#X connect 13 0 9 1;
#X connect 14 0 25 0;
#X connect 14 1 26 0;
#X connect 14 2 27 0;
#X connect 15 0 16 1;
#X connect 16 0 20 0;
#X connect 17 0 19 0;
#X connect 18 0 28 0;
#X connect 18 1 29 0;
#X connect 18 2 30 0;
#X connect 19 0 20 1;
#X connect 20 0 5 1;
#X connect 20 0 7 0;
#X connect 21 0 5 0;
#X connect 21 1 14 0;
#X connect 21 2 18 0;
#X connect 22 0 17 0;
#X connect 23 0 17 1;
#X connect 24 0 19 1;
#X connect 25 0 12 0;
#X connect 26 0 13 0;
#X connect 27 0 15 0;
#X connect 28 0 22 0;
#X connect 29 0 23 0;
#X connect 30 0 24 0;
#X restore 110 270 pd pass;
#X obj 11 7 inlet angle;
#N canvas 0 23 450 300 scale 0;
#X obj 20 12 inlet;
#X obj 20 235 outlet;
#X obj 78 79 *, f 5;
#X obj 20 79 *, f 5;
#X obj 20 101 +, f 10;
#X obj 20 143 sqrt;
#X obj 20 209 /, f 5;
#X obj 78 209 /, f 5;
#X obj 20 34 unpack f f f, f 20;
#X obj 137 209 /, f 5;
#X obj 137 79 *, f 5;
#X obj 20 189 f, f 5;
#X obj 20 167 t b f b f b f, f 25;
#X obj 20 123 +, f 20;
#X obj 78 189 f, f 5;
#X obj 137 189 f, f 5;
#X obj 78 57 t f f;
#X obj 137 57 t f f;
#X obj 20 57 t f f;
#X obj 78 235 outlet;
#X obj 137 235 outlet;
#X connect 0 0 8 0;
#X connect 2 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 13 0;
#X connect 5 0 12 0;
#X connect 6 0 1 0;
#X connect 7 0 19 0;
#X connect 8 0 18 0;
#X connect 8 1 16 0;
#X connect 8 2 17 0;
#X connect 9 0 20 0;
#X connect 10 0 13 1;
#X connect 11 0 6 0;
#X connect 12 0 11 0;
#X connect 12 1 6 1;
#X connect 12 2 14 0;
#X connect 12 3 7 1;
#X connect 12 4 15 0;
#X connect 12 5 9 1;
#X connect 13 0 5 0;
#X connect 14 0 7 0;
#X connect 15 0 9 0;
#X connect 16 0 2 0;
#X connect 16 1 2 1;
#X connect 16 1 14 1;
#X connect 17 0 10 0;
#X connect 17 1 10 1;
#X connect 17 1 15 1;
#X connect 18 0 3 0;
#X connect 18 1 3 1;
#X connect 18 1 11 1;
#X restore 11 392 pd scale;
#X obj 11 467 t b f;
#X obj 133 348 loadbang;
#X obj 398 33 array define \$0-indices;
#X obj 75 392 array get \$0-indices;
#X obj 398 53 array define \$0-outputs;
#X obj 56 466 array set \$0-outputs, f 26;
#X obj 38 488 array set \$0-outputs;
#X obj 11 509 array get \$0-outputs;
#X obj 398 13 array define \$0-matrix;
#X obj 77 161 array get \$0-matrix;
#X obj 253 11 inlet;
#X obj 11 106 t b b;
#X obj 168 55 s \$0-clear;
#N canvas 0 22 133 101 clear.out 0;
#X msg 16 34 const 0;
#X obj 16 56 s \$0-outputs;
#X obj 16 12 r \$0-clear;
#X connect 0 0 1 0;
#X connect 2 0 0 0;
#X restore 398 74 pd clear.out;
#X msg 133 370 3;
#X obj 75 361 * 3;
#X obj 75 414 unpack f f f;
#X obj 76 443 array set \$0-outputs, f 26;
#X obj 11 31 t b l b, f 36;
#X obj 77 137 * 9;
#X msg 132 138 9;
#X msg 77 181 \$1 \$4 \$7 \$2 \$5 \$8 \$3 \$6 \$9;
#N canvas 497 110 369 170 resize.array 0;
#X obj 62 15 inlet;
#X obj 62 61 array size \$0-outputs;
#N canvas 241 413 241 149 set.indices 0;
#X obj 35 17 inlet;
#X obj 35 38 t l l;
#X obj 62 60 list length;
#X obj 35 104 array set \$0-indices;
#X obj 62 83 array size \$0-indices;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 1 2 0;
#X connect 2 0 4 0;
#X restore 113 83 pd set.indices;
#N canvas 135 376 213 194 set.matrices 0;
#X obj 16 34 t l l;
#X obj 43 56 list length;
#X obj 43 79 array size \$0-matrix;
#X obj 16 100 array set \$0-matrix;
#X obj 43 144 s \$0-nmatrices;
#X obj 43 122 / 9;
#X obj 16 10 inlet;
#X connect 0 0 3 0;
#X connect 0 1 1 0;
#X connect 1 0 2 0;
#X connect 1 0 5 0;
#X connect 5 0 4 0;
#X connect 6 0 0 0;
#X restore 165 105 pd set.matrices;
#X obj 62 37 route nls indices matrices print, f 35;
#N canvas 429 176 317 496 print 0;
#X obj 48 104 print vbap 3d;
#X msg 48 82 number of matrices: \$1;
#X obj 48 60 f;
#X obj 63 38 r \$0-nmatrices;
#X obj 21 14 inlet;
#X obj 21 36 t b b;
#N canvas 357 171 193 267 loop 0;
#X obj 8 60 until;
#X obj 8 82 f, f 7;
#X obj 47 60 f 0;
#X obj 59 82 + 1;
#X obj 8 32 t b b, f 7;
#X obj 8 8 inlet;
#X obj 47 158 outlet;
#X obj 8 181 outlet;
#X obj 8 134 sel 256;
#X obj 47 111 r \$0-nmatrices;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 1 0 8 0;
#X connect 2 0 1 1;
#X connect 3 0 1 1;
#X connect 4 0 0 0;
#X connect 4 1 2 0;
#X connect 5 0 4 0;
#X connect 8 0 7 0;
#X connect 8 0 0 1;
#X connect 8 1 6 0;
#X connect 9 0 8 1;
#X restore 21 127 pd loop;
#X obj 137 211 loadbang;
#X obj 79 254 array get \$0-indices;
#X obj 79 232 * 3;
#X msg 137 233 3;
#X obj 60 394 list prepend;
#X obj 115 321 loadbang;
#X msg 115 343 9;
#X obj 60 342 * 9;
#X obj 60 414 print vbap 3d;
#X obj 60 150 t f f f;
#X obj 79 276 list append |;
#X obj 60 364 array get \$0-matrix;
#X obj 79 298 list prepend;
#X obj 99 186 list append |;
#X connect 1 0 0 0;
#X connect 2 0 1 0;
#X connect 3 0 2 1;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 2 0;
#X connect 6 1 16 0;
#X connect 7 0 10 0;
#X connect 8 0 17 0;
#X connect 9 0 8 0;
#X connect 10 0 8 1;
#X connect 11 0 15 0;
#X connect 12 0 13 0;
#X connect 13 0 18 1;
#X connect 14 0 18 0;
#X connect 16 0 14 0;
#X connect 16 1 9 0;
#X connect 16 2 20 0;
#X connect 17 0 19 0;
#X connect 18 0 11 0;
#X connect 19 0 11 1;
#X connect 20 0 19 1;
#X restore 217 62 pd print;
#X connect 0 0 4 0;
#X connect 4 0 1 0;
#X connect 4 1 2 0;
#X connect 4 2 3 0;
#X connect 4 3 5 0;
#X restore 253 51 pd resize.array;
#X text 250 184 that in prepare;
#X connect 0 0 13 0;
#X connect 1 0 2 0;
#X connect 1 1 11 0;
#X connect 2 0 0 1;
#X connect 3 0 4 0;
#X connect 3 1 33 0;
#X connect 4 0 5 1;
#X connect 5 0 29 0;
#X connect 6 0 1 0;
#X connect 7 0 34 0;
#X connect 8 0 25 0;
#X connect 8 1 3 0;
#X connect 9 0 6 1;
#X connect 9 1 6 2;
#X connect 9 2 6 3;
#X connect 11 0 4 1;
#X connect 11 0 2 1;
#X connect 12 0 32 0;
#X connect 13 0 14 0;
#X connect 13 1 19 0;
#X connect 13 2 31 0;
#X connect 14 0 21 0;
#X connect 14 1 20 0;
#X connect 15 0 28 0;
#X connect 17 0 30 0;
#X connect 21 0 10 0;
#X connect 23 0 35 0;
#X connect 24 0 36 0;
#X connect 25 0 0 0;
#X connect 25 1 5 0;
#X connect 28 0 17 1;
#X connect 29 0 17 0;
#X connect 30 0 20 1;
#X connect 30 1 19 1;
#X connect 30 2 31 1;
#X connect 32 0 8 0;
#X connect 32 1 9 0;
#X connect 32 2 26 0;
#X connect 33 0 23 0;
#X connect 34 0 23 1;
#X connect 35 0 6 0;
