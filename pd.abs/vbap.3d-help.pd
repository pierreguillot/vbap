#N canvas 412 23 920 829 10;
#X obj 524 344 list prepend set;
#X obj 524 366 list trim;
#X msg 524 388 -0.707572 0 3.51962e-06 0.706642 0 0 0 0;
#X msg 471 15 \; pd dsp 1;
#X msg 403 16 \; pd dsp 0;
#X obj 168 345 list prepend set;
#X obj 168 367 list trim;
#X msg 168 389 0.707107 0 0.707107;
#X obj 9 293 noise~;
#N canvas 0 22 450 300 init 0;
#X obj 14 19 loadbang;
#X msg 14 41 0;
#X obj 14 63 s \$0-angle;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X restore 237 8 pd init;
#X obj 387 322 noise~;
#X text 528 410 Gains of the loudspkeakers, f 13;
#N canvas 252 23 618 319 loudspks.display~ 0;
#X obj 238 96 inlet~;
#X obj 137 121 cnv 10 10 10 empty \$0-ls-8-1 empty 20 12 0 14 -260818
-260818 0;
#X obj 248 145 inlet~;
#X obj 137 161 cnv 10 10 10 empty \$0-ls-8-2 empty 20 12 0 14 -166441
-262144 0;
#X obj 177 161 cnv 10 10 10 empty \$0-ls-8-3 empty 20 12 0 14 -166441
-262144 0;
#X obj 137 241 cnv 10 10 10 empty \$0-ls-8-6 empty 20 12 0 14 -166441
-262144 0;
#X obj 177 121 cnv 10 10 10 empty \$0-ls-8-4 empty 20 12 0 14 -260818
-260818 0;
#X obj 137 201 cnv 10 10 10 empty \$0-ls-8-5 empty 20 12 0 14 -166441
-262144 0;
#X obj 177 201 cnv 10 10 10 empty \$0-ls-8-8 empty 20 12 0 14 -166441
-262144 0;
#X obj 177 241 cnv 10 10 10 empty \$0-ls-8-7 empty 20 12 0 14 -166441
-262144 0;
#X obj 268 196 inlet~;
#X obj 278 245 inlet~;
#X obj 408 96 inlet~;
#X obj 418 145 inlet~;
#X obj 438 196 inlet~;
#X obj 448 245 inlet~;
#X obj 238 122 misc/color.ls~ \$0-ls-8-1;
#X obj 248 171 misc/color.ls~ \$0-ls-8-2;
#X obj 268 222 misc/color.ls~ \$0-ls-8-3;
#X obj 278 271 misc/color.ls~ \$0-ls-8-4;
#X obj 408 122 misc/color.ls~ \$0-ls-8-5;
#X obj 418 171 misc/color.ls~ \$0-ls-8-6;
#X obj 438 222 misc/color.ls~ \$0-ls-8-7;
#X obj 448 271 misc/color.ls~ \$0-ls-8-8;
#X text 137 105 0;
#X text 137 145 1;
#X text 177 145 2;
#X text 177 105 3;
#X text 137 185 4;
#X text 137 225 5;
#X text 177 225 6;
#X text 177 185 7;
#X connect 0 0 16 0;
#X connect 2 0 17 0;
#X connect 10 0 18 0;
#X connect 11 0 19 0;
#X connect 12 0 20 0;
#X connect 13 0 21 0;
#X connect 14 0 22 0;
#X connect 15 0 23 0;
#X coords 0 -1 1 1 124 165 2 100 100;
#X restore 387 370 pd loudspks.display~;
#X text 384 145 Text that contains the angles in degrees, f 21;
#X obj 9 406 misc/vu.meter~;
#X obj 64 376 misc/vu.meter~;
#X text 7 155 Text that contains the angles in degrees, f 21;
#X text 117 211 Angle of the virtual source in degrees, f 21;
#X text 168 410 Gains of the loudspkeakers, f 13;
#N canvas 0 22 450 300 header 0;
#X text 81 12 by Pierre Guillot - 2016;
#X obj 11 11 cnv 15 65 18 empty empty vbap.3d 2 8 0 14 -262144 -66577
0;
#X coords 0 -1 1 1 222 20 2 10 10;
#X restore 9 7 pd header;
#X text 10 34 An abstraction that computes the gains of a set of loudspeakers
for the spatialization of a virtual source using V. Pulkki's Vector
Base Amplitude Panning technique.;
#X text 10 84 The argument is the name of the text object that contains
a line starting with "angles" and the angles in degrees of the loudspeakers.
The angles should be in ascending order. If you change the angles of
the text object \, you can bang the right inlet to re-compute the matrices.
You can also change the text object by sending the name of the new
text object as a symbol in the right inlet., f 105;
#X obj 387 188 text define -k \$0-cube;
#A set angles 45 35.3 135 35.3 225 35.3 315 35.3 45 -35.3 135 -35.3
225 -35.3 315 -35.3;
#N canvas 0 22 496 180 vector.gain.cube~ 0;
#X obj 26 15 inlet~;
#X obj 54 107 *~;
#X obj 69 15 inlet;
#X obj 69 37 unpack f f f f f f f f, f 58;
#X msg 69 59 \$1 20;
#X obj 69 81 line~;
#X obj 54 129 outlet~;
#X obj 103 107 *~;
#X msg 118 59 \$1 20;
#X obj 118 81 line~;
#X obj 103 129 outlet~;
#X obj 152 107 *~;
#X msg 167 59 \$1 20;
#X obj 167 81 line~;
#X obj 152 129 outlet~;
#X obj 201 107 *~;
#X msg 216 59 \$1 20;
#X obj 216 81 line~;
#X obj 201 129 outlet~;
#X obj 251 107 *~;
#X msg 266 59 \$1 20;
#X obj 266 81 line~;
#X obj 251 129 outlet~;
#X obj 300 107 *~;
#X msg 315 59 \$1 20;
#X obj 315 81 line~;
#X obj 300 129 outlet~;
#X obj 349 107 *~;
#X msg 364 59 \$1 20;
#X obj 364 81 line~;
#X obj 349 129 outlet~;
#X obj 398 107 *~;
#X msg 413 59 \$1 20;
#X obj 413 81 line~;
#X obj 398 129 outlet~;
#X connect 0 0 1 0;
#X connect 0 0 7 0;
#X connect 0 0 11 0;
#X connect 0 0 15 0;
#X connect 0 0 19 0;
#X connect 0 0 23 0;
#X connect 0 0 27 0;
#X connect 0 0 31 0;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 3 1 8 0;
#X connect 3 2 12 0;
#X connect 3 3 16 0;
#X connect 3 4 20 0;
#X connect 3 5 24 0;
#X connect 3 6 28 0;
#X connect 3 7 32 0;
#X connect 4 0 5 0;
#X connect 5 0 1 1;
#X connect 7 0 10 0;
#X connect 8 0 9 0;
#X connect 9 0 7 1;
#X connect 11 0 14 0;
#X connect 12 0 13 0;
#X connect 13 0 11 1;
#X connect 15 0 18 0;
#X connect 16 0 17 0;
#X connect 17 0 15 1;
#X connect 19 0 22 0;
#X connect 20 0 21 0;
#X connect 21 0 19 1;
#X connect 23 0 26 0;
#X connect 24 0 25 0;
#X connect 25 0 23 1;
#X connect 27 0 30 0;
#X connect 28 0 29 0;
#X connect 29 0 27 1;
#X connect 31 0 34 0;
#X connect 32 0 33 0;
#X connect 33 0 31 1;
#X restore 387 345 pd vector.gain.cube~;
#X text 502 211 Angles of the virtual source in degrees, f 21;
#X obj 8 189 text define -k \$0-tri;
#A set angles 45 0 0 35.3 -45 0;
#N canvas 0 22 250 192 vector.gain.tri~ 0;
#X obj 26 15 inlet~;
#X obj 54 107 *~;
#X obj 69 15 inlet;
#X msg 69 59 \$1 20;
#X obj 69 81 line~;
#X obj 54 129 outlet~;
#X obj 103 107 *~;
#X msg 118 59 \$1 20;
#X obj 118 81 line~;
#X obj 103 129 outlet~;
#X obj 69 37 unpack f f f, f 17;
#X obj 153 107 *~;
#X msg 168 59 \$1 20;
#X obj 168 81 line~;
#X obj 153 129 outlet~;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 0 0 11 0;
#X connect 1 0 5 0;
#X connect 2 0 10 0;
#X connect 3 0 4 0;
#X connect 4 0 1 1;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 8 0 6 1;
#X connect 10 0 3 0;
#X connect 10 1 7 0;
#X connect 10 2 12 0;
#X connect 11 0 14 0;
#X connect 12 0 13 0;
#X connect 13 0 11 1;
#X restore 9 345 pd vector.gain.tri~;
#X obj 120 406 misc/vu.meter~;
#X obj 120 251 nbx 5 14 -1e+37 1e+37 0 0 empty \$0-angle empty 0 -8
0 10 -262144 -1 -1 0 256;
#X obj 120 300 pack f f, f 12;
#X obj 179 251 nbx 5 14 -1e+37 1e+37 0 0 empty \$0-angle empty 0 -8
0 10 -262144 -1 -1 0 256;
#X obj 179 270 t b f;
#X obj 120 279 f;
#X obj 504 251 nbx 5 14 -1e+37 1e+37 0 0 empty \$0-angle empty 0 -8
0 10 -262144 -1 -1 274 256;
#X obj 504 300 pack f f, f 15;
#X obj 564 251 nbx 5 14 -1e+37 1e+37 0 0 empty \$0-angle empty 0 -8
0 10 -262144 -1 -1 90 256;
#X obj 564 270 t b f;
#X obj 504 279 f;
#X obj 504 322 vbap.3d \$0-cube;
#X obj 634 262 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 347 610 3d/mat.inv;
#X msg 332 549 -0.507096 0.507096 0.577858;
#X obj 398 639 3d/pol.to.car;
#X text 518 485 r = √(x*x+y*y);
#X text 518 499 θ = -atan2(y \, x);
#X text 518 513 ϕ = asin(z/r);
#X obj 534 635 expr -atan2($f1 \, $f2);
#X obj 544 541 nbx 5 14 -1e+37 1e+37 0 0 empty \$0-angle empty 0 -8
0 10 -262144 -1 -1 0 256;
#X obj 604 541 nbx 5 14 -1e+37 1e+37 0 0 empty \$0-angle empty 0 -8
0 10 -262144 -1 -1 0 256;
#X obj 604 580 t b f;
#X obj 544 589 f;
#X obj 674 635 expr asin($f1);
#X obj 674 541 nbx 5 14 -1e+37 1e+37 0 0 empty \$0-angle empty 0 -8
0 10 -262144 -1 -1 0 256;
#X obj 592 692 t f f, f 8;
#X obj 667 692 t f f, f 8;
#X obj 592 756 *;
#X obj 637 756 *;
#X obj 667 714 cos;
#X obj 712 714 sin;
#X obj 592 736 * -1;
#X obj 592 714 sin;
#X obj 637 714 cos;
#X obj 592 778 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 662 778 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 1 256;
#X obj 732 778 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 592 661 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 693 661 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 681 492 unpack f f f;
#X msg 681 470 -1 1 1;
#X obj 682 753 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 1 256;
#X msg 708 212 45 35.3 135 35.3 225 35.3 315 35.3 45 -35.3 135 -35.3
225 -35.3 315 -35.3;
#X obj 120 323 vbap.3d.tri 45 0 0 35.3 -45 0;
#X obj 168 656 list prepend set;
#X obj 168 678 list trim;
#X msg 168 700 0.707107 0 0.707107;
#X obj 9 604 noise~;
#X obj 9 717 misc/vu.meter~;
#X obj 64 687 misc/vu.meter~;
#X text 117 522 Angle of the virtual source in degrees, f 21;
#X text 168 721 Gains of the loudspkeakers, f 13;
#N canvas 0 22 250 192 vector.gain.tri~ 0;
#X obj 26 15 inlet~;
#X obj 54 107 *~;
#X obj 69 15 inlet;
#X msg 69 59 \$1 20;
#X obj 69 81 line~;
#X obj 54 129 outlet~;
#X obj 103 107 *~;
#X msg 118 59 \$1 20;
#X obj 118 81 line~;
#X obj 103 129 outlet~;
#X obj 69 37 unpack f f f, f 17;
#X obj 153 107 *~;
#X msg 168 59 \$1 20;
#X obj 168 81 line~;
#X obj 153 129 outlet~;
#X connect 0 0 1 0;
#X connect 0 0 6 0;
#X connect 0 0 11 0;
#X connect 1 0 5 0;
#X connect 2 0 10 0;
#X connect 3 0 4 0;
#X connect 4 0 1 1;
#X connect 6 0 9 0;
#X connect 7 0 8 0;
#X connect 8 0 6 1;
#X connect 10 0 3 0;
#X connect 10 1 7 0;
#X connect 10 2 12 0;
#X connect 11 0 14 0;
#X connect 12 0 13 0;
#X connect 13 0 11 1;
#X restore 9 656 pd vector.gain.tri~;
#X obj 120 717 misc/vu.meter~;
#X obj 120 562 nbx 5 14 -1e+37 1e+37 0 0 empty \$0-angle empty 0 -8
0 10 -262144 -1 -1 0 256;
#X obj 120 611 pack f f, f 12;
#X obj 179 562 nbx 5 14 -1e+37 1e+37 0 0 empty \$0-angle empty 0 -8
0 10 -262144 -1 -1 0 256;
#X obj 179 581 t b f;
#X obj 120 590 f;
#X obj 493 767 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X msg 721 319 -0 0.816138 0.577857;
#X msg 331 687 0.577857;
#X msg 401 687 0.577857;
#X obj 331 709 *;
#X obj 331 731 * 2;
#X obj 331 753 print;
#X obj 120 634 vbap.3d \$0-tri;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 5 0 6 0;
#X connect 6 0 7 0;
#X connect 8 0 26 0;
#X connect 10 0 23 0;
#X connect 23 0 12 0;
#X connect 23 1 12 1;
#X connect 23 2 12 2;
#X connect 23 3 12 3;
#X connect 23 4 12 4;
#X connect 23 5 12 5;
#X connect 23 6 12 6;
#X connect 23 7 12 7;
#X connect 26 0 14 0;
#X connect 26 1 15 0;
#X connect 26 2 27 0;
#X connect 28 0 32 0;
#X connect 29 0 71 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 31 1 29 1;
#X connect 32 0 29 0;
#X connect 33 0 37 0;
#X connect 34 0 38 0;
#X connect 35 0 36 0;
#X connect 36 0 37 0;
#X connect 36 1 34 1;
#X connect 37 0 34 0;
#X connect 38 0 0 0;
#X connect 38 0 23 1;
#X connect 39 0 38 1;
#X connect 46 0 53 0;
#X connect 46 0 65 0;
#X connect 47 0 50 0;
#X connect 48 0 49 0;
#X connect 49 0 50 0;
#X connect 49 1 46 1;
#X connect 50 0 46 0;
#X connect 51 0 54 0;
#X connect 51 0 66 0;
#X connect 52 0 51 0;
#X connect 53 0 60 0;
#X connect 53 1 61 0;
#X connect 54 0 57 0;
#X connect 54 1 58 0;
#X connect 55 0 62 0;
#X connect 56 0 63 0;
#X connect 57 0 55 1;
#X connect 57 0 56 1;
#X connect 57 0 69 0;
#X connect 58 0 64 0;
#X connect 59 0 55 0;
#X connect 59 0 87 0;
#X connect 60 0 59 0;
#X connect 61 0 56 0;
#X connect 67 0 47 0;
#X connect 67 1 48 0;
#X connect 67 2 52 0;
#X connect 68 0 67 0;
#X connect 71 0 5 0;
#X connect 71 0 26 1;
#X connect 72 0 73 0;
#X connect 73 0 74 0;
#X connect 75 0 80 0;
#X connect 80 0 76 0;
#X connect 80 1 77 0;
#X connect 80 2 81 0;
#X connect 82 0 86 0;
#X connect 83 0 94 0;
#X connect 84 0 85 0;
#X connect 85 0 86 0;
#X connect 85 1 83 1;
#X connect 86 0 83 0;
#X connect 89 0 91 0;
#X connect 90 0 91 1;
#X connect 91 0 92 0;
#X connect 92 0 93 0;
#X connect 94 0 72 0;
#X connect 94 0 80 1;
