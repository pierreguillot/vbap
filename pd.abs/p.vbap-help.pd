#N canvas 458 131 712 378 10;
#N canvas 0 22 450 300 header 0;
#X text 80 12 by Pierre Guillot - 2016;
#X obj 11 11 cnv 15 65 18 empty empty vbap 2 8 0 14 -262144 -66577
0;
#X coords 0 -1 1 1 222 20 2 10 10;
#X restore 9 7 pd header;
#X text 10 34 An abstraction that computes the gains of a set of loudspeakers
for the spatialization of a virtual source using V. Pulkki's Vector
Base Amplitude Panning technique., f 90;
#X text 10 74 The argument is the name of the text object that contains
a line starting with "angles" and the angles in degrees of the loudspeakers.
The angles should be in ascending order. If you change the angles of
the text object \, you can bang the right inlet to re-compute the matrices.
You can also change the text object by sending the name of the new
text object as a symbol in the right inlet., f 105;
#X obj 13 171 text define -k \$0-angles;
#A set stereo 45 -45 \; square 0 90 180 270 \; octo 0 45 90 135 180
225 270 315 \; five 0 30 110 250 330 \; cube 45 35.3 135 35.3 225 35.3
315 35.3 45 -35.3 135 -35.3 225 -35.3 315 -35.3 \; tri 45 0 0 35.3
-45 0 \; dodecahedron 180 90 0 26.6 324 -26.6 72 26.6 36 -26.6 144
26.6 108 -26.6 216 26.6 180 -26.6 288 26.6 252 -26.6 180 -90 \; icosahedron
180 69.1 159.1 0 90 20.9 135 35.3 135 -35.3 180 -69.1 20.9 0 90 -20.9
45 35.3 45 -35.3 0 69.1 200.9 0 270 20.9 225 35.3 225 -35.3 0 -69.1
339.1 0 270 -20.9 315 35.3 315 -35.3 \; pulkki 0 0 72 0 144 0 216 0
288 0 60 45 180 45 240 45 \;;
#N canvas 0 22 253 374 example.3d.triangle 0;
#X text 21 8 Angle of the virtual source in degrees, f 21;
#X text 24 317 Gains of the loudspkeakers, f 13;
#X obj 24 48 nbx 5 14 -45 45 0 0 empty \$0-angle empty 0 -8 0 10 -262144
-1 -1 0 256;
#X obj 24 207 pack f f, f 12;
#X obj 66 68 nbx 5 14 0 35.3 0 0 empty \$0-angle empty 0 -8 0 10 -262144
-1 -1 0 256;
#X obj 66 87 t b f;
#X obj 24 117 f;
#X obj 24 252 list prepend set;
#X obj 24 274 list trim;
#X msg 24 296 0.707107 0 0.707107;
#X obj 24 182 *, f 5;
#X obj 189 199 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 51 117 / 35.3;
#X msg 51 139 1 \$1;
#X obj 51 161 -;
#X text 108 129 We need to stay inside the triangle, f 13;
#X obj 24 230 p.vbap 3d text \$0-angles tri;
#X connect 2 0 6 0;
#X connect 3 0 16 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 3 1;
#X connect 5 1 12 0;
#X connect 6 0 10 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 10 0 3 0;
#X connect 11 0 16 1;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 10 1;
#X connect 16 0 7 0;
#X restore 13 271 pd example.3d.triangle;
#N canvas 0 22 324 203 example.2d.stereo 0;
#X obj 24 43 nbx 5 14 -45 45 0 0 empty \$0-angle empty 0 -8 0 10 -262144
-1 -1 0 256;
#X obj 24 84 list prepend set;
#X obj 24 106 list trim;
#X text 21 10 Angle of the virtual source in degrees, f 21;
#X text 24 149 Gains of the loudspkeakers, f 13;
#X msg 24 128 0.707107 0.707107;
#X obj 207 38 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 229 38 print;
#X obj 24 62 p.vbap 2d text \$0-angles stereo;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 6 0 8 1;
#X connect 7 0 8 1;
#X connect 8 0 1 0;
#X restore 13 191 pd example.2d.stereo;
#N canvas 466 202 263 225 example.2d.octo 0;
#X text 18 24 Angle of the virtual source in degrees, f 21;
#X text 19 172 Gains of the loudspkeakers, f 13;
#X obj 21 59 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 21 102 list prepend set;
#X obj 21 124 list trim;
#X msg 21 146 0.99618 0 0 0 0 0 0 0.0873222;
#X obj 192 57 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 21 80 p.vbap 2d text \$0-angles octo;
#X msg 220 57 print;
#X connect 2 0 7 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 7 1;
#X connect 7 0 3 0;
#X connect 8 0 7 1;
#X restore 13 231 pd example.2d.octo;
#N canvas 371 127 299 236 example.2d.five 0;
#X text 19 14 Angle of the virtual source in degrees, f 21;
#X text 19 162 Gains of the loudspkeakers, f 13;
#X obj 21 49 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 21 92 list prepend set;
#X obj 21 114 list trim;
#X msg 21 136 0 0.61374 0.789508 0 0;
#X obj 218 47 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 192 21 print;
#X obj 21 70 p.vbap 2d text \$0-angles five;
#X connect 2 0 8 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 8 1;
#X connect 7 0 8 1;
#X connect 8 0 3 0;
#X restore 13 251 pd example.2d.five;
#N canvas 428 73 322 246 example.3d.cube 0;
#X obj 25 138 list prepend set;
#X obj 25 160 list trim;
#X obj 25 46 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 25 94 pack f f, f 15;
#X obj 85 45 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 85 64 t b f;
#X obj 25 73 f;
#X obj 196 89 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 25 182 0 0.0649022 0.996238 0 0 0.0574207 0 0;
#X msg 215 89 print;
#X obj 25 117 p.vbap 3d text \$0-angles cube;
#X text 26 14 Angles of the virtual source in degrees, f 21;
#X text 23 202 Gains of the loudspkeakers, f 13;
#X connect 0 0 1 0;
#X connect 1 0 8 0;
#X connect 2 0 6 0;
#X connect 3 0 10 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 5 1 3 1;
#X connect 6 0 3 0;
#X connect 7 0 10 1;
#X connect 9 0 10 1;
#X connect 10 0 0 0;
#X restore 13 291 pd example.3d.cube;
#N canvas 213 163 355 267 example.3d.dodecahedron 0;
#X obj 25 138 list prepend set;
#X obj 25 160 list trim;
#X obj 244 79 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 25 182 0 -2.98023e-08 0 0 1 0 0 0 0 0 0 0;
#X msg 264 79 print;
#X obj 25 117 p.vbap 3d text \$0-angles dodecahedron;
#X obj 25 46 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 25 94 pack f f, f 15;
#X obj 85 45 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 85 64 t b f;
#X obj 25 73 f;
#X text 26 14 Angles of the virtual source in degrees, f 21;
#X text 23 202 Gains of the loudspkeakers, f 13;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 5 1;
#X connect 4 0 5 1;
#X connect 5 0 0 0;
#X connect 6 0 10 0;
#X connect 7 0 5 0;
#X connect 8 0 9 0;
#X connect 9 0 10 0;
#X connect 9 1 7 1;
#X connect 10 0 7 0;
#X restore 13 311 pd example.3d.dodecahedron;
#N canvas 428 73 444 261 example.3d.icosahedron 0;
#X obj 23 131 list prepend set;
#X obj 23 153 list trim;
#X obj 224 72 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 23 175 0 0 0 0 0 0 0.707107 0 0 0 0 0 0 0 0 0 0.707107 0 0 0
;
#X msg 244 69 print;
#X obj 23 110 p.vbap 3d tex\$0-angles icosahedron;
#X obj 23 42 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 23 90 pack f f, f 15;
#X obj 83 41 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 83 60 t b f;
#X text 24 10 Angles of the virtual source in degrees, f 21;
#X text 21 198 Gains of the loudspkeakers, f 13;
#X connect 0 0 1 0;
#X connect 1 0 3 0;
#X connect 2 0 5 1;
#X connect 4 0 5 1;
#X connect 5 0 0 0;
#X connect 6 0 7 0;
#X connect 7 0 5 0;
#X connect 8 0 9 0;
#X connect 9 0 7 0;
#X connect 9 1 7 1;
#X restore 13 331 pd example.3d.icosahedron;
#N canvas 771 166 306 212 example.2d.square 0;
#X text 9 14 Angle of the virtual source in degrees, f 21;
#X text 9 162 Gains of the loudspkeakers, f 13;
#X obj 11 49 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 11 92 list prepend set;
#X obj 11 114 list trim;
#X msg 11 136 0.224956 0.974369 0 0;
#X obj 194 47 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X msg 214 45 print;
#X obj 11 70 p.vbap 2d text \$0-angles square;
#X connect 2 0 8 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 6 0 8 1;
#X connect 7 0 8 1;
#X connect 8 0 3 0;
#X restore 13 211 pd example.2d.square;
#N canvas 428 73 884 526 compare.3d.cube 0;
#X obj 196 192 list prepend set;
#X obj 196 214 list trim;
#X obj 192 100 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 196 148 pack f f, f 15;
#X obj 256 99 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 256 118 t b f;
#X obj 196 127 f;
#X obj 322 133 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 196 236 0 0.0649022 0.996238 0 0 0.0574207 0 0;
#X msg 128 38 0;
#X msg 168 38 45;
#X msg 187 59 35.3;
#X msg 207 29 -35.3;
#X msg 198 8 135;
#X msg 417 130 print;
#X obj 485 163 list prepend define_loudspeakers 3;
#X obj 485 208 vbap 0 0 0, f 11;
#X obj 485 185 list trim;
#N canvas 0 22 137 159 get.text 0;
#X obj 8 95 list split 1, f 13;
#X obj 8 31 unpack s s;
#X obj 8 11 inlet;
#X obj 45 117 outlet;
#X obj 8 51 text search, f 15;
#X obj 8 73 text get, f 12;
#X connect 0 1 3 0;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 1 1 5 3;
#X connect 2 0 1 0;
#X connect 4 0 5 0;
#X connect 5 0 0 0;
#X restore 493 133 pd get.text;
#X obj 497 81 symbol \$0-angles;
#X obj 501 53 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X obj 577 132 t b f;
#X obj 485 336 list prepend set;
#X obj 485 358 list trim;
#X msg 485 380 0 0.0649021 0.996238 0 0 0.0574206 0 0;
#X obj 666 142 t b f;
#X msg 294 1 90;
#X obj 668 199 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 668 218 t b f;
#X obj 633 80 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 714 88 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 196 171 p.vbap 3d text \$0-angles cube;
#X msg 494 103 cube \$1;
#X msg 269 55 0;
#X obj 575 282 t b f;
#X obj 485 288 f;
#X obj 485 312 pack f f f f f f f f;
#X obj 485 230 route 0 1 2 3 4 5 6, f 20;
#X obj 575 253 route 7;
#X connect 0 0 1 0;
#X connect 1 0 8 0;
#X connect 2 0 6 0;
#X connect 2 0 29 0;
#X connect 3 0 31 0;
#X connect 4 0 5 0;
#X connect 4 0 30 0;
#X connect 5 0 6 0;
#X connect 5 1 3 1;
#X connect 6 0 3 0;
#X connect 7 0 31 1;
#X connect 9 0 2 0;
#X connect 10 0 2 0;
#X connect 11 0 4 0;
#X connect 12 0 4 0;
#X connect 13 0 2 0;
#X connect 14 0 31 1;
#X connect 15 0 17 0;
#X connect 16 0 37 0;
#X connect 17 0 16 0;
#X connect 18 0 15 0;
#X connect 19 0 32 0;
#X connect 20 0 19 0;
#X connect 21 0 16 0;
#X connect 21 1 16 1;
#X connect 22 0 23 0;
#X connect 23 0 24 0;
#X connect 25 0 16 0;
#X connect 25 1 16 2;
#X connect 26 0 2 0;
#X connect 27 0 28 0;
#X connect 28 0 16 0;
#X connect 28 1 16 3;
#X connect 29 0 21 0;
#X connect 30 0 25 0;
#X connect 31 0 0 0;
#X connect 32 0 18 0;
#X connect 33 0 4 0;
#X connect 34 0 35 0;
#X connect 34 1 36 7;
#X connect 35 0 36 0;
#X connect 36 0 22 0;
#X connect 37 0 35 1;
#X connect 37 1 36 1;
#X connect 37 2 36 2;
#X connect 37 3 36 3;
#X connect 37 4 36 4;
#X connect 37 5 36 5;
#X connect 37 6 36 6;
#X connect 37 7 38 0;
#X connect 38 0 34 0;
#X restore 193 191 pd compare.3d.cube;
#N canvas 213 163 983 517 compare.3d.dodecahedron 0;
#X obj 196 192 list prepend set;
#X obj 196 214 list trim;
#X obj 196 148 pack f f, f 15;
#X obj 256 118 t b f;
#X obj 196 127 f;
#X obj 415 133 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 196 236 0 -2.98023e-08 0 0 1 0 0 0 0 0 0 0;
#X msg 435 133 print;
#X obj 196 171 p.vbap 3d text \$0-angles dodecahedron;
#X obj 516 203 list prepend define_loudspeakers 3;
#X obj 516 248 vbap 0 0 0, f 40;
#X obj 516 225 list trim;
#N canvas 0 22 137 159 get.text 0;
#X obj 8 95 list split 1, f 13;
#X obj 8 31 unpack s s;
#X obj 8 11 inlet;
#X obj 45 117 outlet;
#X obj 8 51 text search, f 15;
#X obj 8 73 text get, f 12;
#X connect 0 1 3 0;
#X connect 1 0 4 0;
#X connect 1 1 4 1;
#X connect 1 1 5 3;
#X connect 2 0 1 0;
#X connect 4 0 5 0;
#X connect 5 0 0 0;
#X restore 516 173 pd get.text;
#X obj 516 131 symbol \$0-angles;
#X obj 516 103 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 394 57 t b f;
#X obj 546 366 list prepend set;
#X obj 546 388 list trim;
#X msg 546 410 0 2.1889e-08 0 0 1 0 0 0 0 0 0 0;
#X obj 460 67 t b f;
#X obj 427 5 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X obj 508 13 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-262144 -1 -1 0 256;
#X msg 516 153 dodecahedron \$1;
#X obj 516 270 route 0 1 2 3 4 5 6 7 8 9 10 11 12;
#X msg 582 17 -26.6;
#X msg 582 38 26.6;
#X msg 356 17 36;
#X msg 432 31 72;
#X msg 349 44 288;
#X msg 794 71 0 90 0 26.6 324 -26.6 72 26.6 36 -26.6 144 26.6 108 -26.6
216 26.6 180 -26.6 288 26.6 252 -26.6 0 -90, f 22;
#X obj 511 311 f;
#X obj 690 305 t b f;
#X obj 754 342 print;
#X obj 516 342 pack f f f f f f f f f f f f, f 32;
#X connect 0 0 1 0;
#X connect 1 0 6 0;
#X connect 2 0 8 0;
#X connect 3 0 4 0;
#X connect 3 1 2 1;
#X connect 4 0 2 0;
#X connect 5 0 8 1;
#X connect 7 0 8 1;
#X connect 8 0 0 0;
#X connect 9 0 11 0;
#X connect 10 0 23 0;
#X connect 11 0 10 0;
#X connect 12 0 9 0;
#X connect 13 0 22 0;
#X connect 14 0 13 0;
#X connect 15 0 10 0;
#X connect 15 1 10 1;
#X connect 15 1 4 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 19 0 10 0;
#X connect 19 1 10 2;
#X connect 19 1 3 0;
#X connect 20 0 15 0;
#X connect 21 0 19 0;
#X connect 22 0 12 0;
#X connect 23 0 30 1;
#X connect 23 1 33 1;
#X connect 23 2 33 2;
#X connect 23 3 33 3;
#X connect 23 4 33 4;
#X connect 23 5 33 5;
#X connect 23 6 33 6;
#X connect 23 7 33 7;
#X connect 23 8 33 8;
#X connect 23 9 33 9;
#X connect 23 10 33 10;
#X connect 23 11 31 0;
#X connect 24 0 21 0;
#X connect 25 0 21 0;
#X connect 26 0 20 0;
#X connect 27 0 20 0;
#X connect 28 0 20 0;
#X connect 30 0 33 0;
#X connect 31 0 30 0;
#X connect 31 1 33 11;
#X connect 33 0 16 0;
#X restore 193 211 pd compare.3d.dodecahedron;
